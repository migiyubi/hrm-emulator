!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(o)for(var i=0;i<this.length;i++){var r=this[i][0];null!=r&&(s[r]=!0)}for(var l=0;l<e.length;l++){var a=[].concat(e[l]);o&&s[a[0]]||(n&&(a[2]?a[2]="".concat(n," and ").concat(a[2]):a[2]=n),t.push(a))}},t}},function(e,t,n){var o=n(2),s=n(3);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var i={insert:"head",singleton:!1},r=(o(s,i),s.locals?s.locals:{});e.exports=r},function(e,t,n){"use strict";var o,s=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function l(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},o=[],s=0;s<e.length;s++){var i=e[s],a=t.base?i[0]+t.base:i[0],h=n[a]||0,u="".concat(a," ").concat(h);n[a]=h+1;var p=l(u),c={css:i[1],media:i[2],sourceMap:i[3]};-1!==p?(r[p].references++,r[p].updater(c)):r.push({identifier:u,updater:m(c,t),references:1}),o.push(u)}return o}function h(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var s=n.nc;s&&(o.nonce=s)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var r=i(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var u,p=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function c(e,t,n,o){var s=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=p(t,s);else{var i=document.createTextNode(s),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function d(e,t,n){var o=n.css,s=n.media,i=n.sourceMap;if(s?e.setAttribute("media",s):e.removeAttribute("media"),i&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var f=null,_=0;function m(e,t){var n,o,s;if(t.singleton){var i=_++;n=f||(f=h(t)),o=c.bind(null,n,i,!1),s=c.bind(null,n,i,!0)}else n=h(t),o=d.bind(null,n,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=s());var n=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var s=l(n[o]);r[s].references--}for(var i=a(e,t),h=0;h<n.length;h++){var u=l(n[h]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}n=i}}}},function(e,t,n){"use strict";n.r(t);var o=n(0),s=n.n(o)()((function(e){return e[1]}));s.push([e.i,"@import url(https://fonts.googleapis.com/css?family=Oswald:400,700&display=block);"]),s.push([e.i,"body {\r\n  margin: 0;\r\n  overflow: hidden;\r\n  background: #222222;\r\n}\r\n\r\n/* custom slider */\r\ninput[type=range] {\r\n  -webkit-appearance: none;\r\n  width: 100%;\r\n  margin: 10px 0;\r\n}\r\ninput[type=range]:focus {\r\n  outline: none;\r\n}\r\ninput[type=range]::-webkit-slider-runnable-track {\r\n  width: 100%;\r\n  height: 6px;\r\n  cursor: pointer;\r\n  box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.2);\r\n  background: #ffffff;\r\n  border-radius: 1px;\r\n  border: 1px solid #000000;\r\n}\r\ninput[type=range]::-webkit-slider-thumb {\r\n  border: 1px solid #000000;\r\n  height: 24px;\r\n  width: 10px;\r\n  border-radius: 0px;\r\n  background: #ffffff;\r\n  cursor: pointer;\r\n  -webkit-appearance: none;\r\n  margin-top: -10px;\r\n}\r\ninput[type=range]::-moz-range-track {\r\n  width: 100%;\r\n  height: 4px;\r\n  cursor: pointer;\r\n  box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.2);\r\n  background: #ffffff;\r\n  border-radius: 1px;\r\n  border: 1px solid #000000;\r\n}\r\ninput[type=range]::-moz-range-thumb {\r\n  border: 1px solid #000000;\r\n  height: 24px;\r\n  width: 8px;\r\n  border-radius: 0px;\r\n  background: #ffffff;\r\n  cursor: pointer;\r\n}\r\n\r\n.container {\r\n  padding: 8px;\r\n  display: flex;\r\n  background-color: #444444;\r\n}\r\n\r\n.container div {\r\n  margin: 0 6px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.container > div:last-child {\r\n  margin-left: auto;\r\n}\r\n\r\n.text {\r\n  font-size: 12px;\r\n  color: #ffffff;\r\n}\r\n\r\n#slider-speed {\r\n  width: 80px;\r\n}\r\n\r\n#slider-speed-value {\r\n  width: 32px;\r\n}\r\n\r\n#icon-github-repository {\r\n  width: 24px;\r\n  height: 24px;\r\n  vertical-align: middle;\r\n}\r\n\r\n.canvas-container {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n",""]),t.default=s},function(e,t,n){"use strict";n.r(t);n(1);const o={OK:0,EMPTY_INBOX:1,HOLD_NULL:-1,REF_NULL:-2,EMPTY_ADDR:-3,INVALID_PTR:-4,TYPE_MISMATCH:-5,NO_SUCH_LABEL:-1001};class s{constructor(e,t){this._func=e,this._name=t,this._index=-1}get name(){return this._name}get param(){return this._param}get index(){return this._index}set index(e){this._index=e}apply(e){return this._func(e)}}class i extends s{constructor(){super(e=>{const t=e._inbox.shift();return this._panelValue=t,void 0===t?o.EMPTY_INBOX:(e._hold=t,o.OK)},"inbox")}get panelValue(){return this._panelValue}}class r extends s{constructor(){super(e=>(this._panelValue=e._hold,null===e._hold?o.HOLD_NULL:(e._outbox.push(e._hold),e._hold=null,o.OK)),"outbox")}get panelValue(){return this._panelValue}}class l extends s{constructor(e,t){let n;n=e?e=>void 0===e._floor[t]?o.REF_NULL:(e._hold=e._floor[t],this._floorIndex=t,this._panelValue=e._floor[t],o.OK):e=>{const n=e._floor[t];return void 0===n||"number"!=typeof n?o.INVALID_POINTER:(e._hold=e._floor[n],this._floorIndex=n,this._panelValue=e._floor[n],o.OK)},super(n,"copyfrom"),this._param=e?`${t}`:`[${t}]`}get floorIndex(){return this._floorIndex}get panelValue(){return this._panelValue}}class a extends s{constructor(e,t){let n;n=e?e=>null===e._hold?o.HOLD_NULL:(e._floor[t]=e._hold,this._floorIndex=t,this._panelValue=e._floor[t],o.OK):e=>{if(null===e._hold)return o.HOLD_NULL;const n=e._floor[t];return void 0===n||"number"!=typeof n?o.INVALID_POINTER:(e._floor[n]=e._hold,this._floorIndex=n,this._panelValue=e._floor[n],o.OK)},super(n,"copyto"),this._param=e?`${t}`:`[${t}]`}get floorIndex(){return this._floorIndex}get panelValue(){return this._panelValue}}class h extends s{constructor(e,t){let n;n=e?e=>null===e._hold?o.HOLD_NULL:void 0===e._floor[t]?o.REF_NULL:"number"!=typeof e._hold||"number"!=typeof e._floor[t]?o.TYPE_MISMATCH:(e._hold+=e._floor[t],this._floorIndex=t,this._panelValue=e._floor[t],this._resultValue=e._hold,o.OK):e=>{if(null===e._hold)return o.HOLD_NULL;const n=e._floor[t];return void 0===n||"number"!=typeof n?o.INVALID_POINTER:"number"!=typeof e._hold||"number"!=typeof e._floor[n]?o.TYPE_MISMATCH:(e._hold+=e._floor[n],this._floorIndex=n,this._panelValue=e._floor[n],this._resultValue=e._hold,o.OK)},super(n,"add"),this._param=e?`${t}`:`[${t}]`}get floorIndex(){return this._floorIndex}get panelValue(){return this._panelValue}get resultValue(){return this._resultValue}get operator(){return"+"}}class u extends s{constructor(e,t){let n;n=e?e=>null===e._hold?o.HOLD_NULL:void 0===e._floor[t]?o.REF_NULL:typeof e._hold!=typeof e._floor[t]?o.TYPE_MISMATCH:("string"==typeof e._hold?e._hold=e._hold.charCodeAt(0)-e._floor[t].charCodeAt(0):e._hold-=e._floor[t],this._floorIndex=t,this._panelValue=e._floor[t],this._resultValue=e._hold,o.OK):e=>{if(null===e._hold)return o.HOLD_NULL;const n=e._floor[t];return void 0===n||"number"!=typeof n?o.INVALID_POINTER:typeof e._hold!=typeof e._floor[n]?o.TYPE_MISMATCH:("string"==typeof e._hold?e._hold=e._hold.charCodeAt(0)-e._floor[n].charCodeAt(0):e._hold-=e._floor[n],this._floorIndex=n,this._panelValue=e._floor[n],this._resultValue=e._hold,o.OK)},super(n,"sub"),this._param=e?`${t}`:`[${t}]`}get floorIndex(){return this._floorIndex}get panelValue(){return this._panelValue}get resultValue(){return this._resultValue}get operator(){return"-"}}class p extends s{constructor(e,t){let n;n=e?e=>void 0===e._floor[t]?o.REF_NULL:"number"!=typeof e._floor[t]?o.TYPE_MISMATCH:(this._floorIndex=t,this._panelValue=e._floor[t],e._hold=++e._floor[t],this._resultValue=e._hold,o.OK):e=>{const n=e._floor[t];return void 0===n||"number"!=typeof n?o.INVALID_POINTER:"number"!=typeof e._floor[n]?o.TYPE_MISMATCH:(this._floorIndex=n,this._panelValue=e._floor[n],e._hold=++e._floor[n],this._resultValue=e._hold,o.OK)},super(n,"bumpp"),this._param=e?`${t}`:`[${t}]`}get floorIndex(){return this._floorIndex}get panelValue(){return this._panelValue}get resultValue(){return this._resultValue}}class c extends s{constructor(e,t){let n;n=e?e=>void 0===e._floor[t]?o.REF_NULL:"number"!=typeof e._floor[t]?o.TYPE_MISMATCH:(this._floorIndex=t,this._panelValue=e._floor[t],e._hold=--e._floor[t],this._resultValue=e._hold,o.OK):e=>{const n=e._floor[t];return void 0===n||"number"!=typeof n?o.INVALID_POINTER:"number"!=typeof e._floor[n]?o.TYPE_MISMATCH:(this._floorIndex=n,this._panelValue=e._floor[n],e._hold=--e._floor[n],this._resultValue=e._hold,o.OK)},super(n,"bumpm"),this._param=e?`${t}`:`[${t}]`}get floorIndex(){return this._floorIndex}get panelValue(){return this._panelValue}get resultValue(){return this._resultValue}}class d extends s{constructor(e,t,n){super(e=>{let s=0;return void 0===e._instructions.find((e,n)=>(s=n,e.label===t))?(console.error("no such label.",t),o.NO_SUCH_LABEL):(n(e,s),o.OK)},e),this._toLabel=t}get toLabel(){return this._toLabel}}class f extends d{constructor(e){super("jump",e,(e,t)=>{e._cursor=t})}}class _ extends d{constructor(e){super("jumpz",e,(e,t)=>null===e._hold?o.HOLD_NULL:"number"!=typeof e._hold?o.TYPE_MISMATCH:void(0===e._hold&&(e._cursor=t)))}}class m extends d{constructor(e){super("jumpn",e,(e,t)=>null===e._hold?o.HOLD_NULL:"number"!=typeof e._hold?o.TYPE_MISMATCH:void(e._hold<0&&(e._cursor=t)))}}class x extends s{constructor(e){super(e=>o.OK,"label"),this._label=e}get label(){return this._label}}const b=0,y=-1001,g=-1002,v=-1003;class w{constructor(e={}){this._instructions=null,this._initialInbox=null,this._initialFloor=null,this._lines=0,this._steps=0,this._inbox=null,this._outbox=null,this._floor=null,this._cursor=0,this._hold=null,this._steps=0,this._verbose=void 0!==e.verbose&&e.verbose}setInstructions(e){this._instructions=e,this._lines=e.reduce((e,t)=>void 0===t.label?e+1:e,0)}setField(e,t,n){this._initialInbox=e,this._initialFloor=t,this._expected=n}run(){this._reset();const e=[];let t=b,n=o.OK;for(;;){const s=this._instructions[this._cursor];n=s.apply(this);const i={index:s.index,name:s.name};if(void 0!==s.label&&(i.label=s.label),void 0!==s.toLabel&&(i.toLabel=s.toLabel),void 0!==s.param&&(i.param=s.param),void 0!==s.floorIndex&&(i.floorIndex=s.floorIndex),void 0!==s.panelValue&&(i.panelValue=s.panelValue),void 0!==s.resultValue&&(i.resultValue=s.resultValue),void 0!==s.operator&&(i.operator=s.operator),e.push(i),this._verbose&&console.log(this._inbox,this._outbox,this._floor,this._hold,this._cursor,this._steps),n!==o.OK){n!==o.EMPTY_INBOX&&(t=y);break}if(++this._cursor,void 0===s.label&&++this._steps,"outbox"===s.operationName){const e=this._outbox.length-1;if(this._expected[e]!==this._outbox[e]){t=g;break}}if(this._cursor>=this._instructions.length)break;if(this._steps>=1e4){t=v;break}}if(t===b&&(n===o.OK||n===o.EMPTY_INBOX)){this._expected.length===this._outbox.length&&this._expected.reduce((e,t,n)=>e&&t===this._outbox[n],!0)||(t=g)}return{hrmResult:t,lastInstructionResult:n,history:e,lines:this._lines,steps:this._steps}}_reset(){this._inbox=this._initialInbox.slice(),this._floor=Object.assign({},this._initialFloor),this._outbox=[],this._cursor=0,this._hold=null,this._steps=0}}class C{parse(e,t={}){const n=[],o=/^(\w+)(\:?)$/i,s=/^(\w+)\s+(\[?)(\w+?)(\]?)$/i;for(const i of e.split("\n")){const e=i.trim();if(""===e)continue;const r=e.match(o)||e.match(s);if(!r)return console.error("syntax error.",e),null;let l=null;r[1];if(":"===r[2])l=this._parseLabel(r);else{const e=r[1];"inbox"===e?l=this._parseInbox():"outbox"===e?l=this._parseOutbox():"copyfrom"===e?l=this._parseCopyfrom(r,t):"copyto"===e?l=this._parseCopyto(r,t):"add"===e?l=this._parseAdd(r,t):"sub"===e?l=this._parseSub(r,t):"bumpp"===e?l=this._parseBumpup(r,t):"bumpm"===e?l=this._parseBumpdown(r,t):"jump"===e?l=this._parseJump(r):"jumpz"===e?l=this._parseJumpIfZero(r):"jumpn"===e&&(l=this._parseJumpIfNeg(r))}if(null===l)return console.error("unknown instruction.",e),null;l.index=n.length,n.push(l)}return n}_parseInbox(){return new i}_parseOutbox(){return new r}_parseCopyfrom(e,t){const n=this._parseParam(e,t);return null===n?null:new l(n.isDirect,n.value)}_parseCopyto(e,t){const n=this._parseParam(e,t);return null===n?null:new a(n.isDirect,n.value)}_parseAdd(e,t){const n=this._parseParam(e,t);return null===n?null:new h(n.isDirect,n.value)}_parseSub(e,t){const n=this._parseParam(e,t);return null===n?null:new u(n.isDirect,n.value)}_parseBumpup(e,t){const n=this._parseParam(e,t);return null===n?null:new p(n.isDirect,n.value)}_parseBumpdown(e,t){const n=this._parseParam(e,t);return null===n?null:new c(n.isDirect,n.value)}_parseJump(e){return e.length<4?null:new f(e[3])}_parseJumpIfZero(e){return e.length<4?null:new _(e[3])}_parseJumpIfNeg(e){return e.length<4?null:new m(e[3])}_parseLabel(e){return new x(e[1])}_parseParam(e,t){if(e.length<5)return null;const n=e[3];let o=parseInt(n,10);if(isNaN(o)&&(o=t[n],void 0===o))return console.error("no such alias.",n),null;const s={value:o,isDirect:!1};if(""===e[2]&&""===e[4])s.isDirect=!0;else{if("["!==e[2]||"]"!==e[4])return null;s.isDirect=!1}return s}}class E{constructor(e=document.createElement("canvas")){this._context=e.getContext("2d")}get domElement(){return this._context.canvas}setSize(e,t){this._context.canvas.width=e,this._context.canvas.height=t}render(e){const t=this._context;t.clearRect(0,0,t.canvas.width,t.canvas.height);for(let n=0;n<4;n++)e.render(t,n)}}class O{constructor(){this.children=[],this.depth=0,this.position={x:0,y:0},this.scale={x:1,y:1},this.speedCoef=1,this.visible=!0}render(e,t){const n=e;n.save(),n.translate(this.position.x,this.position.y),n.scale(this.scale.x,this.scale.y),this.visible&&this.depth===t&&this.renderSelf(n);for(const e of this.children)e.render(n,t);n.restore()}clear(){this.children=[]}add(e){this.children.push(e)}remove(e){this.children=this.children.filter(t=>e!==t)}renderSelf(e){throw new Error("not implemented.")}}class S extends O{renderSelf(e){}}class A extends O{constructor(e,t=.06*Math.random()-.03){super(),this._size=e,this._rotation=t,this._value=null,this._expression=null,this._isInteger=!1}get value(){return this._value}set value(e){this._value=e,"number"==typeof e?(this._isInteger=!0,this._expression=e.toString(10)):(this._isInteger=!1,this._expression=e)}renderSelf(e){const t=e,n=this._size,o=`bold ${.6*n|0}px Oswald`;if(t.save(),t.rotate(this._rotation),t.save(),t.translate(-n/2,-n/2),t.fillStyle=this._isInteger?"#506037":"#44445f",t.fillRect(0,.15*n,n,n),t.fillStyle=this._isInteger?"#a0ca5f":"#9695c5",t.fillRect(0,0,n,n),t.restore(),this._expression){const e=0,n=1;t.fillStyle="#506137",t.font=o,t.textAlign="center",t.textBaseline="middle",t.fillText(this._expression,e,n)}t.restore()}}class T extends O{constructor(e){super(),this._fontSize=e,this._shadowOffset={x:.02*e,y:.1*e},this._operator=""}get operator(){return this._operator}set operator(e){this._operator=e}renderSelf(e){e.font=`bold ${this._fontSize}px Oswald`,e.textAlign="center",e.textBaseline="middle",e.fillStyle="#506037",e.fillText(this._operator,this._shadowOffset.x,this._shadowOffset.y),e.fillStyle="#a0ca5f",e.fillText(this._operator,0,0)}}class P extends O{constructor(e,t,n){super(),this._heldPanel=new A(t),this._heldPanel.visible=!1,this.add(this._heldPanel),this._heldPanelForAnimation=new A(t),this._heldPanelForAnimation.visible=!1,this.add(this._heldPanelForAnimation),this._operatorPopup=new T(1*t|0),this._operatorPopup.visible=!1,this.add(this._operatorPopup),this._topOffset={x:0,y:-1*t},this._bottomOffset={x:0,y:.55*e},this._leftOffset={x:-1*e,y:0},this._rightOffset={x:1*e,y:0},this._topLeftOffset={x:-1*t,y:-.8*t},this._topRightOffset={x:1*t,y:-.8*t},this._heldPanel.position.x=this._topOffset.x,this._heldPanel.position.y=this._topOffset.y,this._operatorPopup.depth=1,this._operatorPopup.position.x=0,this._operatorPopup.position.y=this._topLeftOffset.y,this._speed=n/2400,this._flipHorizontal=!1,this._texture=new Image,this._texture.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAoCAYAAACB4MgqAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACdgAAAnYB2mDjTwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA14SURBVFiFtZl5eFRFuoffs/Se9JJ0ICEriQFBCFvCLowII7uAsiOIGBQULyh4HWfcZnjcHkdF1HFlEYWwKPsqIoMgBIZEdgOEQEgMIUkn3Z100unuc+4fMT2EDvAo3t8/3VX1fV+9VadObUfg98sC9LKa9X1MJm0Pv19pHfArFlkjCn6/qhEEFK1G9Nd5A6Isi06NLBZ76nzZjsraH4H9QNlt1I3wG+0jTSbdtHCTZrpWK8UMvDtZ6tcz0ZLWrqWQFG/FZjE06+Rye7lUVMXJvKscOlrk3rE331vlrHX7fOqqSqfnM6DgGvNwQM8tGtYceC+rQX5GUdVuiopGloQzrjr/+qiIsEE6ndQvc3I345QH0vRJ8dbf2OamKnd4WLP5pP+Dpf9xlld4zla7ak+LIkNNWlkjiYLq9vpEAXGbq873LHDlZuCyWS8ts5t0Qx/o1MJ2h92IJApcrqxj65ly1W/UCeuXT8Jd7aVju5a3BQ1QW+vDYNBQ7vDQb8RnpJpkdWg7u6DXiAAEVJXsS85AVs6VcledfwiQ2yx4uF5a2ivJOnZi1xjT9Y+h1qewNOcKjgBsWTGJtin22wb/6dQV1mw+xd59+aRbNHSLDW/WrsTl5dXdF6646wLtgcrGfOnX384x4fpX5/RLsAAcKHCyNa+K/xRVU+ioZUNeBY8+0pMvFo8hKtJ029AA0S3CqKysI2vTSXrFhVPnV1iRU8bWnx1kX65GJwnEWnSE62R0kqQtqKg11AeUnY3+AoBFr1kyvUer6Z1jw1l9rIyY6GieH9+fHTnnWbwzm/XLJtAuNeoPAb5eBYWVDJu0AreznnV/mUCPtnGUOWuY8tY6kox+eidZqPMrLNiUV+SuC8Q3+okAokiPFLuREpcXp1/i87mjOXS2iJXZJzi47dH/N2iA1gk29m/JxGY34an3ARBlMbHmufHsyXcBoJdFZFEwNPIGwRUFrUYUuFRZx33dUjlxsZR/bj3IjtVTQqa44isuVPW3wakquKvrb1geYTWwbeVk5ny+nfwSBwAWkx69VsavqI0xVEBpAi6J6vlil5cIo4afi8qY/v5Gli6+n/AwXZMKDh29zCdfHsUfCPw2clRef3//TS3iYsx8/PZwpiz6Bp8/gMvjpa7ejywKuOr8qCqOa+1FAKfX/+nuvIqaFLuBA6cLGTggmU7to5tWrao89cIOpo/vgkaW+C0SBIFjp69w9kLFTe36ZCTQt08Cb286yPg3VjMgxQzAplNlqtevrAwBDwRYf7q0Rj1dWoPRIDP3sZ4hQX/ILqRdqp3fu/CMHnInqzeevKXdC8/0590th4jV1dM7yULOL24u1ymCJcJ0Rwg4YDKY9b5tF91IOpnoFmEhAfPyy+naMeZ3QQM8MKw9qzedwue7+TAzh+t46pHulNX4yDpRxpEqH3s3zgBVHQJorwdP69cjQfngjeGkdYhuNmALu4nSsprfDW416xl2byrL1x67pW3mQ+kcvephysw+7N+SSXSLMAb0bS0AvZqAS5LUPr1jK3NAUWkZFdrbAJ3aR5OdW/S7wQEWzO7Da4t/oP4WvW6PMNKxXUt6dItDFBvW8S53RYcDyU3ArWZtSmK8VRMVaeRqefO9mhRvRQmoHD9TGszLzrlxQyqdtRw73XRvdL7AgSBoWZr10y2aCP17JXHgcGEwbTRqJVEUg3Oz2FCJt7CswqMkJ9jIv1TZTJgGRbe0Mmn2BtzVXg7nFtN/zHIOHQ2FP3/RQc9hy8na8HMw7+jxX3h0/k6yPlrMe5/n4q723hQ8Mc5CUYkrmC696q5TFKW8CbiiKDnb95yrDA/ToSgqJaXukEC5J0u4eNnLX/9nLvc8uIp5L33Hx2++QuaCHRQWO4N2nlofEx7fyHsL/86mXecpLatmy7fneHjuDr75/CPS0+4ic/JE3vww+6bgiqIiy8GFksslrjqu2aM3lhw+/FOx31Pr4+Fxnflw+ZEmQTy1PjLn7+Bfry9k4qjhLF+0CKslhqljR/LBqwsZ9tDa4BB644NDjB85hvv+1Ie3X36B9MFLWLq6iJ2rltMmOQmA2Q9PZv3285Q7PDcEr3TWYTXrg+njp0sDQF5jOriShJl0d7RLtadPGNWB+a/sYtTgOwkP06GqKtPnbmXkn0czYtA97P7hIJu/3Uur6GiqPR4G9OlJv549eejJ9yksruKbbedYtuhNJEnCUenEoDcSGx2DXq8jKT4WQRCQJAlVFcjOzaVv93ia05dfH6d3RjzJCTYAXv7n3trqmvoXr+9xrpZX78k5XuLRaiTmzOjBkqxcVFVl7ou7sVlTmD7hQUZMe4KPV6zBUeWiZVQku/cdJOfEadLateHw9vV07TiC/33icbQaDUUlpbz76RcEAgGKr5SydPUGBo6fQbmj4R16cPhgtu+5eMMeP3KsOLh6VzprEWi65MvX/Hc5nLU+gB5dYnnu1d2MeXQNBl08Kxa/wPjHn2Hovf34ct1mvt76LRZzOLm71tE6IQ4AnVbL2BGDg8HiYloya9oE7h33CD6fn6lj72f2tImMe+xpdq78lJZRkVRUNj9UHFW1KIqKPcIIQGlZDbIsNZmigj1usxjvTk9rOIY43V5yTpRQXu7luTmzWL/9O8xhYXRoewcHjzZMZU6Xm0++XHvDHgN455Mv8Pn8AHz1zRZ6Z3Smd3oXPli2kkAggHiDo/ruffkMvDs4ZeOp9YGgNpmnG8ENsizMGDWkrQjQJjmS8z8+RetEO4FAgBXrNjF/1nROnDnXpILjZ87eFPzkz/+1DwQCnMo7z/xZ0/nqmy2cKygkJSmyWb8NO/IYPqhNMJ0YZ8HrVdqGgFut+vmzpqaHN+69W9hNmIxaZEnA5/NTVFJKSlI88nW7Qo0sczNJktgkrZE1WM3h1Hnr+enUGTq1Dz27VtfUc/xMKT27xgXzIm1GOrVvYZVlBl4LHqnXyk89+0Qf4/VBwkwaqms8dO3Ynl3//pGMzh2alF+fvl4ZnTsG/+u0Wjq2S+XshYtE2qwcOnqUjM6htwW7/p3P0HtTEYSm4+ijN0ZEWM3GJYAOQGxhN/7j7wsGWExGbUgQi1lLlcvNi0/P4q+vL8JkNDB6SEOjE2JjmDll7E3Bn539CObwhr3PvJlTkSWJcTOf5rXn5/JD9hH6dk8I8TmUU0T/nokh+cmJNmZNS4+MMOv/AiCDMHrq2DTN9YaeWh9nzpWRnOgmvlU0e9YuwWgwkPXRWxw4nEunu9oSYbXcFLzDnamc2ruJi5eL6ZPRBb8/wNpP3yG+VTQQwByuC/GpcHhueJPw3JN3Gz9bmfMELhaJsizKOm3oWH1ozha6duzP5DHDAbBH2DAa9Gg1Gu7p0/2W0I2Ki2lJ3+5dEQQBjUYmtXUi5y5cok1y8y9mcqKNvPzyZsuMBg3PPXm3OcJqfFpUAqrj+r3J4dxiFMXM80/NQqsJeRi3LUVtug+5VoP6pbDtu3PNlgFMHNVBq9WI48Qaj/+1eS/vdF5buOfAJUYNHnwj39tWSmI8p/KuNluW3qkVuSdDrgqDioo0gYBNdtfULft+/8XMTbvyeoz8c1sJoLrGH3ypbiVFUVi1YVuTJ9M7ozOx0Te+XwwzGYlu0ZJTeVe5q22LJmWiKBBpM+Bye5t9B361EUSAqxXVD2TO31R+qagKgC4d7Bw4cqRZp1BwlVdefZd/vfQmm994nymzF3DuQuEt/SaOGs3K9WdC8lVVxVXtRa9vfo0oq6ghEFCrGgfalYrKmkfmvbTTATB8UBv2HdrP9wduvmcGkGWJHV8vo3X3LpRHWln2zkL+1Dvjln79e2WwceeZkKulLbvP0i2tFVqNxIVLlShKU5N3PznoqasPfNLkmjkh1nLl0pF5kQCFxU4mzd5Elw7dmDdzBsmJcdyuVFXlwJFclmatd27+9vt6SfQZSo7ND45Jl9tL31FL2Lx8IolxVkbPyHLHx5gD7y0caoWGo+KIqSsLyhyedtc+j/j4WEvwFJsQa2Hv15NZt/U0D899EpfbT6e7Oqq90zvTNiVZiGlpJ9JmJdJmDVnlvPX11HhqKXdUcr6gkGOnz9YfzjnuPpR7TBBE4UjJlbIPgX0pibZzQBhAIKDw4Mw1LJjVm8Q4KxcvV7E/u9ApiELJ5DFpGd56v/pg5tqSModnEOANgkuS1KNHlzgjNNwPPvH8tpq3X7rPNOH+Dky4vwNPPr/N89mqrV+t3bgj3xZh6SYgxilKINLrrTeroNVqtV5BEFRvfb1GK8u1giDUiJJQo6jKibLyqoOBQOA4cALw/FrfuMEDUrUA9b4A4x9b6/7pZIn42VsjTZ5aHyMfXlVZ5fJM9fsJe+DRNVk+f6CgrKJmGHDp2k4S7RGGvLmZPZUhA1LL7RHGy7IsLkhtHVFeW/A3dcsXk/xREcZjwB81qWuiIoz5Zw/MUQuy56rd0lpVRkYY/yFJ0uhhA1Od3bvGVUZYDfMabYHx3OB7VTeb1bAiLEz7N6Bno1Gkzbh48pg0nz3CeAm4/e8nDRIibcblwwe2qZs1LcNljzD+IsvyoF/LRKNBe85s1j90u5WkmMN1W2n4NPhHaXSU3bQvIdayVauVJnHNtdqvav7T3XX6PyJaOZk4lbRQAAAAAElFTkSuQmCC"}renderSelf(e){const t=e,n=this._texture;t.save(),this._flipHorizontal&&t.scale(-1,1),t.drawImage(n,0,0,n.width,n.height,-n.width/2,-n.height/2,n.width,n.height),t.restore()}refresh(){this._heldPanelForAnimation.visible=!1}async step(e,t=200){this._heldPanelForAnimation.visible=!1;const n=this.position,o=e.x-n.x,s=e.y-n.y,i=Math.sqrt(o*o+s*s)/(this.speedCoef*this._speed);return new Promise(s=>{new TWEEN.Tween(n).to(e,i).delay(t/this.speedCoef).onStart(()=>{o>0?this._flipHorizontal=!0:o<0&&(this._flipHorizontal=!1)}).onComplete(s).start()})}async pickFromBottom(e,t=0){const n=this._heldPanelForAnimation;return n.position.x=this._bottomOffset.x,n.position.y=this._bottomOffset.y,n.value=e,n.visible=!0,new Promise(o=>{new TWEEN.Tween(n.position).to(this._topOffset,200/this.speedCoef).delay(t/this.speedCoef).easing(TWEEN.Easing.Cubic.Out).onComplete(()=>{this._heldPanel.value=e,this._heldPanel.visible=!0,o()}).start()})}async pickFromLeft(e,t=0){const n=this._heldPanelForAnimation;return n.position.x=this._leftOffset.x,n.position.y=this._leftOffset.y,n.value=e,n.visible=!0,new Promise(o=>{new TWEEN.Tween(n.position).to(this._topOffset,200/this.speedCoef).delay(t/this.speedCoef).easing(TWEEN.Easing.Cubic.Out).onComplete(()=>{this._heldPanel.value=e,this._heldPanel.visible=!0,o()}).start()})}async dropToBottom(e,t=0){const n=this._heldPanelForAnimation;return n.position.x=this._topOffset.x,n.position.y=this._topOffset.y,n.value=this._heldPanel.value,n.visible=!0,e||(this._heldPanel.visible=!1),new Promise(e=>{new TWEEN.Tween(n.position).to(this._bottomOffset,200/this.speedCoef).delay(t/this.speedCoef).easing(TWEEN.Easing.Cubic.Out).onComplete(e).start()})}async dropToRight(e,t=0){const n=this._heldPanelForAnimation;return n.position.x=this._topOffset.x,n.position.y=this._topOffset.y,n.value=this._heldPanel.value,n.visible=!0,e||(this._heldPanel.visible=!1),new Promise(e=>{new TWEEN.Tween(n.position).to(this._rightOffset,200/this.speedCoef).delay(t/this.speedCoef).easing(TWEEN.Easing.Cubic.Out).onComplete(e).start()})}async stomp(){return Promise.resolve()}async doArithmetic(e,t,n,o=0){const s=this._heldPanel,i=this._heldPanelForAnimation;return i.position.x=this._bottomOffset.x,i.position.y=this._bottomOffset.y,i.value=t,i.visible=!0,new Promise(t=>{const r=new TWEEN.Tween(s.position).to(this._topLeftOffset,200/this.speedCoef).delay(o/this.speedCoef).easing(TWEEN.Easing.Cubic.Out),l=new TWEEN.Tween(i.position).to(this._topRightOffset,200/this.speedCoef).delay(o/this.speedCoef).easing(TWEEN.Easing.Cubic.Out).onComplete(()=>{this._operatorPopup.operator=e,this._operatorPopup.visible=!0}),a=new TWEEN.Tween(s.position).to(this._topOffset,100/this.speedCoef).delay(200/this.speedCoef),h=new TWEEN.Tween(i.position).to(this._topOffset,100/this.speedCoef).delay(200/this.speedCoef).onComplete(()=>{s.value=n,i.value=n,this._operatorPopup.visible=!1}),u={x:i.scale.x,y:i.scale.y},p={x:1.3*i.scale.x,y:1.3*i.scale.y},c=new TWEEN.Tween(i.scale).to(p,50/this.speedCoef).easing(TWEEN.Easing.Cubic.Out),d=new TWEEN.Tween(i.scale).to(u,50/this.speedCoef).easing(TWEEN.Easing.Cubic.In).onComplete(t);r.chain(a),l.chain(h),h.chain(c),c.chain(d),r.start(),l.start()})}}class I extends O{constructor(e){super(),this._width=e.x,this._height=e.y}renderSelf(e){const t=e,n=this._width,o=this._height;t.save(),t.translate(-n/2,-o/2),t.strokeStyle="#322a25",t.lineWidth=4,t.strokeRect(2,2,n-4,o-4),t.restore()}}class L extends O{constructor(e,t,n,o,s,i){super(),this._width=e.x,this._height=e.y,this._floorSize=t,this._cellSize=n,this._panelSize=o,this._frame=new I(e),this.add(this._frame),this._inboxPanels=[],this._outboxPanels=[],this._floorPanels=[];for(const[t,i]of s.entries()){const s=new A(o);s.value=i,s.position.x=-e.x/2+(n+4)/2,s.position.y=1.5*t*o,this._inboxPanels.push(s),this.add(s)}for(let e=0;e<t.y;e++)for(let n=0;n<t.x;n++){const s=new A(o),r=e*t.x+n;s.position=this._floorIndexToLocalCoordinates(r);const l=i[r];void 0!==l?(s.value=l,s.visible=!0):(s.value=null,s.visible=!1),this._floorPanels[r]=s,this.add(s)}}renderSelf(e){const t=e,n=this._width,o=this._height,s=this._floorSize.x,i=this._floorSize.y,r=this._cellSize,l=.05*r;{t.save(),t.translate(-n/2,-o/2),t.fillStyle="#ca9877",t.fillRect(0,0,n,o),t.strokeStyle="#322a25",t.lineWidth=4;const e=2,s=o/2-r/2-e,i=o-s;t.fillStyle="#4c3b2c",t.fillRect(e,s,r,i),t.strokeRect(e,s,r,i),t.fillRect(n-r-e,s,r,i),t.strokeRect(n-r-e,s,r,i),t.restore()}{const e=s*r+2*l,n=i*r+2*l;t.save(),t.translate(-e/2,-n/2+.1*r),t.fillStyle="#999454",t.fillRect(0,0,e,n),t.translate(l,l),t.fillStyle="#8d804c";for(let e=0;e<i;e++)for(let n=e%2;n<s;n+=2)t.fillRect(n*r+l,e*r+l,r-2*l,r-2*l);const o=`${.15*r|0}px Oswald`;t.font=o,t.textAlign="right",t.textBaseline="bottom",t.fillStyle="#506137";for(let e=0;e<i;e++)for(let n=0;n<s;n++)t.fillText(e*s+n,(n+1)*r-2*l,(e+1)*r-2*l);t.restore()}}set(e,t){const n=this._floorPanels[e];n.value=t,n.visible=!0}async setWithAnimation(e,t){const n=this._floorPanels[e],o={x:n.scale.x,y:n.scale.y},s={x:1.5*n.scale.x,y:1.5*n.scale.y};return new Promise(e=>{const i=new TWEEN.Tween(n.scale).to(s,50/this.speedCoef).onComplete(()=>{n.value=t}),r=new TWEEN.Tween(n.scale).to(o,50/this.speedCoef).onComplete(e);i.chain(r).start()})}pickFromInbox(){this._inboxPanels.shift().visible=!1}forwardInbox(){const e=[];for(const t of this._inboxPanels){const n=new TWEEN.Tween(t.position).to({x:t.position.x,y:t.position.y-1.5*this._panelSize},1e3/this.speedCoef).easing(TWEEN.Easing.Cubic.InOut);e.push(n)}for(const t of e)t.start()}dropToOutbox(e){const t=new A(this._panelSize);t.value=e,t.position.x=this._width/2-(this._cellSize+4)/2,t.position.y=0,this._outboxPanels.push(t),this.add(t)}forwardOutbox(){const e=[];for(const t of this._outboxPanels){const n=new TWEEN.Tween(t.position).to({x:t.position.x,y:t.position.y+1.5*this._panelSize},1e3/this.speedCoef).easing(TWEEN.Easing.Cubic.InOut);e.push(n)}for(const t of e)t.start()}forwardOutboxLong(){const e=[];for(const t of this._outboxPanels){const n=new TWEEN.Tween(t.position).to({x:t.position.x,y:t.position.y+15*this._panelSize},2e3).easing(TWEEN.Easing.Quadratic.In);e.push(n)}for(const t of e)t.start()}_floorIndexToLocalCoordinates(e){const t=this._cellSize,n=this._floorSize;return{x:(e%n.x-(n.x-1)/2)*t,y:((e/n.x|0)-(n.y-1)/2)*t}}}class N{constructor(e,t,n,o,s){this._width=e,this._height=t,this._cellSize=n,this._panelSize=o,this._onCursorChange=s,this._scene=new S,this._speedCoefSeed=1,this._abort=!1}get scene(){return this._scene}get speedCoef(){return this._speedCoefSeed}set speedCoef(e){this._speedCoefSeed=e;const t=Math.pow(2,e-1);this._applySpeedCoef(t)}prepare(e,t,n){this._floorSize=n,this._scene.clear();const o=this._width,s=this._height,i=this._cellSize,r=this._panelSize,l=this._floorSize;this._employee=new P(i,r,s),this._employee.position.x=.3*s,this._employee.position.y=.3*s,this._scene.add(this._employee),this._field=new L({x:o,y:s},l,i,r,e,t),this._field.position.x=o/2,this._field.position.y=s/2,this._scene.add(this._field),this._field._frame.depth=3,this._employee._heldPanel.depth=2,this._employee._heldPanelForAnimation.depth=2,this._employee.depth=1,this._field.depth=0}start(e){const t=()=>{if(this._abort)return;if(e.length<=0)return this._employee.refresh(),void this._field.forwardOutboxLong();const n=e.shift();this._onCursorChange&&this._onCursorChange(n.index);let o,s=n.floorIndex;if("inbox"===n.name){if(void 0===n.panelValue)return this._employee.refresh(),void this._field.forwardOutboxLong();s=-1}else"outbox"===n.name&&(s=-2);if(void 0===s)return void t();switch(n.name){case"inbox":o=()=>(this._field.pickFromInbox(),this._field.forwardInbox(),this._employee.pickFromLeft(n.panelValue));break;case"outbox":this._field.forwardOutbox(),o=()=>this._employee.dropToRight(!1).then(()=>{this._field.dropToOutbox(n.panelValue)});break;case"copyfrom":o=()=>this._employee.pickFromBottom(n.panelValue);break;case"copyto":o=()=>this._employee.dropToBottom(!0).then(()=>{this._field.set(s,n.panelValue)});break;case"add":case"sub":o=()=>this._employee.doArithmetic(n.operator,n.panelValue,n.resultValue);break;case"bumpp":case"bumpm":o=()=>this._field.setWithAnimation(s,n.resultValue).then(()=>this._employee.pickFromBottom(n.resultValue,200));break;default:o=()=>{}}const i=this._floorIndexToScreenCoordinatesOfEmployee(s);this._employee.step(i).then(o).then(t)};t()}stop(){this._abort=!0}_floorIndexToScreenCoordinatesOfEmployee(e){const t=this._width,n=this._height,o=this._cellSize,s=this._floorSize;let i,r;return-1===e?(i=o+(o+4)/2,r=n/2):-2===e?(i=t-o-(o+4)/2,r=n/2):(i=t/2+(e%s.x-(s.x-1)/2)*o,r=n/2+((e/s.x|0)-(s.y-1)/2)*o-.55*o),{x:i,y:r}}_applySpeedCoef(e){this._employee&&(this._employee.speedCoef=e),this._field&&(this._field.speedCoef=e)}}class V extends O{constructor(e,t,n){super(),this._expression=e,this._width=t,this._height=n,this._bodyHeight=.8*n,this._font=`bold ${this._bodyHeight}px Oswald`}get highlighted(){return this._highlighted}set highlighted(e){this._highlighted=e}renderSelf(e){this._highlighted&&(e.fillStyle="#00aa00",e.fillRect(0,0,this._width,this._height)),e.font=this._font,e.fillStyle="#ffffff",e.fillText(this._expression,0,this._bodyHeight)}}class j{constructor(e,t){this._width=e,this._height=t,this._scene=new S,this._codeContainer=new S,this._scene.add(this._codeContainer)}get scene(){return this._scene}prepare(e){this._codeContainer.clear();const t=this._width,n=this._height,o=Math.min(n/e.length,26);for(const[n,s]of e.entries()){const e=this._createExpression(s),i=new V(e,t,o);i.position.y=n*o,this._codeContainer.add(i)}}setCursor(e){const t=this._codeContainer.children;for(let n=0;n<t.length;n++)t[n].highlighted=n===e}_createExpression(e){if("label"===e.name)return`${e.label}:`.toUpperCase();return void 0!==e.param?`    ${e.name} ${e.param}`.toUpperCase():void 0!==e.toLabel?`    ${e.name} ${e.toLabel}`.toUpperCase():`    ${e.name}`.toUpperCase()}}class z{constructor(e,t,n,o){this._width=e,this._height=t,this._cellSize=.1*this._height,this._panelSize=.4*this._cellSize,this._renderer=new E(n),this._codeRenderer=new E(o),this._scene=null,this._codeScene=new j(.3*this._height,this._height),this._renderer.setSize(this._width,this._height),this._codeRenderer.setSize(.3*this._height,this._height),this._speedCoefSeed=1,requestAnimationFrame(this._animate.bind(this))}get speedCoef(){return this._speedCoefSeed}set speedCoef(e){this._speedCoefSeed=e,this._scene&&(this._scene.speedCoef=e)}newGame(e,t,n){const o=(new C).parse(t,n);if(null===o)return void console.error("syntax error.");const s=e.generate(),i=new w;i.setInstructions(o),i.setField(s.inputs,e.initialFloor,s.expected);const r=i.run();this._scene&&this._scene.stop(),this._scene=new N(this._width,this._height,this._cellSize,this._panelSize,this._onCursorChange.bind(this)),this._scene.prepare(s.inputs,e.initialFloor,e.floorSize),this._codeScene.prepare(o),this.speedCoef=this.speedCoef,this._scene.start(r.history)}_animate(e){requestAnimationFrame(this._animate.bind(this)),this._update(e),this._render()}_update(e){TWEEN.update()}_render(){this._scene&&this._renderer.render(this._scene.scene),this._codeRenderer.render(this._codeScene.scene)}_onCursorChange(e){this._codeScene.setCursor(e)}}class k{constructor(e,t,n="",o="",s={x:0,y:0}){this._datasetGenerator=e,this._initialFloor=t,this._summary=n,this._description=o,this._floorSize=s}get summary(){return this._summary}get description(){return this._description}get floorSize(){return this._floorSize}get initialFloor(){return this._initialFloor}generate(e=0){return this._datasetGenerator(e)}}class M extends k{constructor(){super(e=>{const t=[],n=[];for(let e=0;e<20;e++)t[e]=100*Math.random()|0,e%2==1&&(n[e/2|0]=t[e]+t[e-1]);return{inputs:t,expected:n}},{},"Pairwise Add","",{x:3,y:1})}}class F extends k{constructor(){super((e,t=10)=>{const n=[];for(let e=0;e<t;e++)n.push(String.fromCharCode("A".charCodeAt(0)+(5*Math.random()|0)));const o=n.filter((e,t,n)=>n.indexOf(e)===t);return{inputs:n,expected:o}},{15:0},"Duplicate Removal","",{x:4,y:4})}}class H extends k{constructor(){super((e,t=4)=>{const n=[];for(let e=0;e<t;e++)for(let e=0;e<3;e++)n.push((19*Math.random()|0)-9);const o=[];for(let e=0;e<n.length;e+=3){const t=n.slice(e,e+3).sort((e,t)=>e-t);o.push(t[0],t[1],t[2])}return{inputs:n,expected:o}},{},"Three Sort","",{x:5,y:2})}}class R extends k{constructor(){super(e=>({inputs:[85,28,67,0,"T","H","I","N","K",0,73,92,21,60,23,58,35,18,60,46,0,10,0],expected:[28,67,85,"H","I","K","N","T",18,21,23,35,46,58,60,60,73,92,10]}),{24:0},"Sorting Floor","",{x:5,y:5})}}class W extends k{constructor(){super((e,t=4)=>{const n=[],o=[];for(let e=0;e<t;e++){const e=1+(3*Math.random()|0),t=Math.random()*Math.pow(10,e)|0;n.push(t),t<10?o.push(t):e<100?(o.push(t/10|0),o.push(t%10)):(o.push(t/100|0),o.push(t%100/10|0),o.push(t%10))}return{inputs:n,expected:o}},{9:0,10:10,11:100},"Digit Exploder","",{x:3,y:4})}}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#slider-speed-value"),t=document.querySelector("#select-scenario"),n=["1/2x","1x","2x","4x","8x","16x","32x"],o=[{problem:new M,solution:"\n        next:\n            inbox\n            copyto 0\n            inbox\n            add    0\n            outbox\n            jump   next\n    ",aliases:{}},{problem:new H,solution:"\n        next:\n            inbox\n            copyto   0\n            inbox\n            copyto   1\n            inbox\n            copyto   2\n\n        common:\n            copyfrom 0\n            copyto   tmp\n            sub      1\n            jumpn    skip_swap\n\n            copyfrom 1\n            copyto   0\n            copyfrom tmp\n            copyto   1\n\n        skip_swap:\n            copyfrom 2\n            copyto   tmp\n            sub      1\n            jumpn    continue\n\n        _out:\n            copyfrom 0\n            outbox\n            copyfrom 1\n            outbox\n            copyfrom 2\n            outbox\n            jump     next\n\n        continue:\n            copyfrom 1\n            copyto   2\n            copyfrom tmp\n            copyto   1\n\n            jump     common\n    ",aliases:{tmp:9}},{problem:new F,solution:"\n        next:\n            inbox \n            copyto   [count]\n            copyfrom  count\n            copyto    index\n        check_dup:\n            bumpm     index\n            jumpn     no_dup\n            copyfrom [index]\n            sub      [count]\n            jumpz     next\n            jump      check_dup\n        no_dup:\n            copyfrom [count]\n            outbox\n            bumpp     count\n            jump      next\n    ",aliases:{index:14,count:15}},{problem:new R,solution:"\n        init:\n            copyfrom  zero\n            copyto    len\n        _first:\n            inbox\n            copyto   [len]\n        next:\n            inbox\n            jumpz     out\n            copyto    tmp\n            bumpp     len\n            copyto    i\n            copyto    j\n            copyto    k\n        compare:\n            bumpm     i\n            jumpn     forward\n            copyfrom [i]\n            sub       tmp\n            jumpn     compare\n        forward:\n            bumpm     j\n            sub       i\n            jumpz     insert\n            copyfrom [j]\n            copyto   [k]\n            bumpm     k\n            jump      forward\n        insert:\n            copyfrom  tmp\n            copyto   [k]\n            jump      next\n        out:\n            copyfrom [len] \n            outbox\n            bumpm     len\n            jumpn     init\n            jump      out\n    ",aliases:{len:20,i:21,j:22,k:23,tmp:19,zero:24}},{problem:new W,solution:"\n        init:\n            inbox\n            copyto    cur\n            copyfrom  zero\n            copyto    d2\n        digit2:\n            copyfrom  cur\n            sub       hundred\n            jumpn     digit2_done\n            copyto    cur\n            bumpp     d2\n            jump      digit2\n        digit2_done:\n            copyfrom  d2\n            copyto    d1\n            jumpz     digit1\n            outbox\n        digit1:\n            copyfrom  cur\n            sub       ten\n            jumpn     digit1_done\n            copyto    cur\n            bumpp     d1\n            jump      digit1\n        digit1_done:\n            copyfrom  d1\n            jumpz     digit0\n            sub       d2\n            outbox\n        digit0:\n            copyfrom  cur\n            outbox\n            jump      init\n    ",aliases:{cur:0,d2:3,d1:4,zero:9,ten:10,hundred:11}}];for(const[e,n]of o.entries()){const o=document.createElement("option");o.value=e,o.textContent=n.problem.summary,t.appendChild(o)}document.querySelector("#slider-speed").addEventListener("input",t=>{const o=t.target.value;i.speedCoef=o,e.textContent=`${n[o]}`}),t.addEventListener("change",e=>{const t=parseInt(e.target.value,10);s(t)});const s=e=>{const t=o[e];i.newGame(t.problem,t.solution,t.aliases)},i=new z(640,640,document.querySelector("#canvas-main"),document.querySelector("#canvas-code"));t.children[2].selected="selected",s(2)})}]);